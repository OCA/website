<?xml version="1.0" encoding="utf-8"?>
<!-- Â© 2016 Sergio Teruel <sergio.teruel@tecnativa.com>
     License LGPL-3.0 or later (http://www.gnu.org/licenses/lgpl). -->
<odoo>

<template id="upload_image_action">
    <!-- Action to upload an image -->
    <div t-if="edit_action" class="form-group mt16">
        <label class="custom-file-input image_upload">
            <div class="btn btn-primary">
                <div class="fa fa-camera"/>
                 Add Pictures
            </div>
            <input id="file_input"
                   class="input-file"
                   name="image"
                   type="file"
                   accept="image/*"/>
        </label>
        <div id="file_input_multi"/>
    </div>
</template>

<template id="image_main">
    <label>Image</label>
    <div class="carousel-inner container" style="padding: 0;">
        <t t-foreach="srcs" t-as="src">
            <div t-attf-class="item #{src_index == index and 'active' or ''}"
                 t-attf-data-slide-to="#{src_index}">
                <img class="img" t-att-src="src[1]"/>
            </div>
        </t>
    </div>
</template>

<template id="image_thumbnails">
    <label>More Images</label>
    <ul class="carousel-indicators">
        <t t-foreach="srcs" t-as="src">
            <li t-attf-data-target="##{id}" t-attf-data-slide-to="#{src_index}"
                t-att-class="src_index == index and 'active'"
                t-attf-style="background-image: url(#{src[1]})">
                <t t-if="edit_action">
                    <div class="existing-attachment-cell mt4">
                        <a class="fa fa-trash fa-lg remove-image pull-left"
                           data-model="base_multi_image.image"
                           t-att-data-owner_model="owner_model"
                           t-att-data-owner_id="owner_id"
                           t-att-data-id="src[0]"/>
                        <a t-attf-class="fa fa-lg make-main-image #{'fa-star' if src_index == 0 else 'fa-star-o'} pull-right"
                           data-model="base_multi_image.image"
                           t-att-data-owner_model="owner_model"
                           t-att-data-owner_id="owner_id"
                           t-att-data-id="src[0]"/>
                    </div>
                </t>
            </li>
        </t>
    </ul>
</template>

<template id="base_multi_image_carousel">
    <t t-call="website_base_multi_image.carousel">
        <t t-set="thumbnails_position" t-value="thumbnails_position or 'right'"/>
        <t t-set="owner_model" t-value="owner_model"/>
        <t t-set="owner_id" t-value="owner_id"/>
        <t t-set="images" t-value="request.env['base_multi_image.image'].search([
            ('owner_model', '=', owner_model),
            ('owner_id', '=', owner_id),])"/>
        <t t-set="x" t-value="width or 400"/>
        <t t-set="y" t-value="height or 400"/>
        <t t-set="srcs"
           t-value="[(image.id, '/web/image/base_multi_image.image/%s/image_main' % (image.id)) for image in images]"/>
        <t t-set="index" t-value="0"/>
        <t t-set="title" t-value="''"/>
        <t t-set="interval" t-value="0"/>
        <t t-set="id" t-value="'slideshow_%s' % int(time.time())"/>
        <t t-set="edit_action" t-value="edit_action or False"/>
    </t>
</template>

<template id="carousel">
    <t t-if="thumbnails_position == 'right'">
        <t t-call="website_base_multi_image.carousel_right"/>
    </t>
    <t t-if="thumbnails_position == 'bottom'">
        <t t-call="website_base_multi_image.carousel_bottom"/>
    </t>
</template>

<template id="carousel_right">
    <div id="base_multi_image" class="row mt8 mb32">
        <div id="images_container" class="js_image_container">
            <div t-attf-id="#{id}" class="carousel slide"
                 data-ride="carousel"
                 t-attf-data-interval="#{interval}">
                <div class="col-md-6">
                    <t t-call="website_base_multi_image.image_main"/>
                    <t t-call="website_base_multi_image.upload_image_action"/>
                </div>
                <div class="col-md-6 thumbnail-images">
                    <t t-call="website_base_multi_image.image_thumbnails"/>
                </div>
            </div>
        </div>
    </div>
</template>

<template id="carousel_bottom">
    <div id="base_multi_image" class="row mt8 mb32">
        <div id="images_container" class="js_image_container">
            <div t-attf-id="#{id}" class="carousel slide"
                 data-ride="carousel"
                 t-attf-data-interval="#{interval}">
                <div class="col-md-12">
                    <t t-call="website_base_multi_image.image_main"/>
                    <t t-call="website_base_multi_image.upload_image_action"/>
                </div>
                <div class="col-md-12 thumbnail-images">
                    <t t-call="website_base_multi_image.image_thumbnails"/>
                </div>
            </div>
        </div>
    </div>
</template>

</odoo>
