<?xml version="1.0" encoding="utf-8" ?>
<!--
    Copyright 2022 Pierre Verkest
    @author Pierre Verkest <pierreverkest84@gmail.com>
    License AGPL-3.0 or later (https://www.gnu.org/licenses/agpl).
-->
<odoo>


    <record model="ir.ui.view" id="view_form_extend">
        <field name="model">ir.ui.view</field>
        <!-- <field name="inherit_id" ref="webiste.view_view_form_extend"/> -->
        <field name="inherit_id" ref="base.view_view_form" />
        <field name="priority">75</field>
        <field name="arch" type="xml">
            <field name="key" position="before">
                <div class="alert alert-warning" role="alert" colspan="2">
                    To be availaible as dynamic snippet template key  value
                    must contains <b>'.dynamic_filter_template_'</b>.
                </div>
            </field>
        </field>
    </record>

    <record id="website_snippet_filter_template_action" model="ir.actions.act_window">
        <field name="name">Snippet filter template</field>
        <field name="res_model">ir.ui.view</field>
        <field
            name="domain"
        >[['key', 'ilike', '.dynamic_filter_template_'], ['type', '=', 'qweb']]</field>
        <field name="view_mode">tree</field>
        <field
            name="view_ids"
            eval="[(5, 0, 0),
            (0, 0, {'view_mode': 'tree', 'view_id': ref('website.view_view_tree_inherit_website')}),
            (0, 0, {'view_mode': 'form', 'view_id': ref('website_snippet_filter_views.view_form_extend')}),
        ]"
        />
        <field name="help" type="html">
          <p class="o_view_nocontent_smiling_face">
            No dynamic filter template found. Let's create one!
          </p>
          <p>
              Snippet filter template are used by dynamic snippet to render
              any object field on the website.

              view key name must contains '.dynamic_filter_template_'
          </p>
        </field>
    </record>

    <menuitem
        id="menu_website_snippet_filter_template"
        name="Snippet filter template"
        action="website_snippet_filter_template_action"
        parent="menu_website_dynamic_snippet_root"
        groups="website.group_website_designer"
    />
</odoo>
