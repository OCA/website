<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <!-- Front-end/Back-end integration -->
        <template id="user_navbar_version" inherit_id="website.layout" groups="base.group_user">
            <xpath expr="//li[contains(@id, 'customize-menu')]" position="before">
                    <li class="dropdown" id="version-menu" groups="base.group_website_designer">
                        <a id="version-menu-button" class="dropdown-toggle" data-toggle="dropdown" href="#" t-att-data-version_id="website.get_current_version(context=context)[0]" t-att-data-version_name="website.get_current_version(context=context)[1]">
                            Version 
                                        <span><t t-esc="website.get_current_version(context=context)[1]"></t></span>
                                    <span class="caret"></span>
                        </a>
                        <ul class="dropdown-menu version_menu" role="menu">
                            <li class="dropdown-header" style="text-transform: uppercase;">All versions</li>
                            <t t-if="website.get_current_version(context=context)[0] == 0 ">
                                <li><a href="#" data-action="change_version"><b>Master</b></a></li>
                            </t>
                            <t t-if="website.get_current_version(context=context)[0] != 0 ">
                                <li><a href="#" data-action="change_version">Master</a></li>
                            </t>
                            <li class="first_divider divider"> </li>
                            <t t-if="website.get_current_version(context=context)[0] == 0 ">
                                <li><a href="#" data-action="duplicate_version">New Version</a></li>
                            </t>
                            <t t-if="website.get_current_version(context=context)[0] != 0 ">
                                <li><a href="#" data-action="duplicate_version">Duplicate Version</a></li>
                                <li><a href="#" data-action="publish_version">Publish Version</a></li>
                                <li><a href="#" data-action="diff_version" groups="base.group_no_one">Diff with Master</a></li>
                            </t>
                            <li class="divider o_publish_version"> </li>
                            <li class="create_experiment"><a href="#" data-action="create_experiment">Launch A/B tests</a></li>
                        </ul>
                    </li>
            </xpath> 
        </template>

        <template id="assets_frontend_menu_version" name="website_menu_version assets" inherit_id="website.assets_editor">
            <xpath expr="." position="inside">
                <script type="text/javascript" src="/website_version/static/src/js/menu_version.js"></script>
                <script type="text/javascript" src="/website_version/static/src/js/edit_version.js"></script>
                <script type="text/javascript" src="/website_version/static/src/js/website_version.tour.versioning.js"></script>
                <link rel="stylesheet" href="/website_version/static/src/css/menu_version.css"/>
            </xpath>
        </template>

        <template id="assets_backend" name="stock assets" inherit_id="web.assets_backend">
            <xpath expr="." position="inside">
                <link rel="stylesheet" href="/website_version/static/src/css/google_analytics.css"/>
                <script type="text/javascript" src="/website_version/static/src/js/widget.js"></script>
            </xpath>
        </template>
    </data>
</openerp>

