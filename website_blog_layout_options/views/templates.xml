<?xml version="1.0" encoding="UTF-8"?>
<openerp>
    <data>

        <template id="frontend_elements_layout" inherit_id="website.assets_frontend" name="elements for the frontend">
            <xpath expr="." position="inside">
                <link rel='stylesheet'
                    href='/website_blog_layout_options/static/src/css/website_blog_layout_options.css'/>
                <script type="text/javascript" 
                    src="/website_blog_layout_options/static/src/js/website_blog_layout_options_frontend.js"/>
            </xpath>
        </template>
        <template id="editor_elements_layout" inherit_id="website.assets_editor" name="elements for the backend">
            <xpath expr="." position="inside">
                <script type="text/javascript" 
                    src="/website_blog_layout_options/static/src/js/website_blog_layout_options_editor.js"/>
            </xpath>
        </template>
        <template id="blog_teaser" inherit_id="website_blog.blog_post_short" name="blogTeaser">
            <xpath expr="//span[@t-field='blog_post.post_date']" position="replace"/>
            <xpath expr="//span[@t-field='blog_post.author_id']" position="replace"/>
            <xpath expr="//p[@t-field='blog_post.teaser']" position="replace"/>
            <xpath expr="//div[@class='o_sharing_links']" position="replace"/>
            <xpath expr="//h2[@t-field='blog_post.name']" position="after">
                <div class="container">
                    <div class="row">
                        <div class="col-md-10">
                            <t t-if="blog_post.display_type == 'complete'">
                                <t t-if="not blog_post.thumbnail">
                                    <div class="pull-left" />
                                </t>
                                <t t-if="blog_post.thumbnail">
                                    <div  class="pull-left thumbnail"
                                        style = "margin: 0px 6px 0px 0px;"
                                        t-field="blog_post.sudo().thumbnail.datas"
                                        t-options = '{"widget": "image", "class" : "o_image_floating o_margin_s pull left", "max_width" : 64 }'
                                        />
                                </t>
                                <div t-field="blog_post.content"/>
                            </t>
                            <t t-if="blog_post.display_type == 'teaser'">
                                <t t-if="blog_post.thumbnail">
                                    <div  class="pull-left thumbnail"
                                        style = "margin: 0px 10px 10px 0px;"
                                        t-field="blog_post.sudo().thumbnail.datas"
                                        t-options = '{"widget": "image",  "max_width" : 250 }'
                                        />
                                </t>
                                <t t-if="not blog_post.thumbnail">
                                    <div class="pull-left">
                                    </div>
                                </t>
                                <!-- TODO ODOO10 has a teaser system, decide
                                     NOTE: SUBTITLES REMOVED and now there is a stock"teaser"
                                     what to do with this -->
                                <p t-esc="blog_post.teaser" />
                                <a t-attf-href="/blog/#{ slug(blog_post.blog_id) }/post/#{ slug(blog_post)}">
                                </a>
                            </t>
                        </div>
                        <div class="col-md-9">
                            <span class="glyphicon glyphicon-user"
                                aria-hidden="true"></span>
                            <span t-field="blog_post.author_id" style="display: inline-block;"/>
                            <span class="glyphicon glyphicon-calendar"
                                aria-hidden="true"></span>
                            <span t-field="blog_post.post_date"
                                style="display: inline-block;"
                                t-options='{"format": "MMMM yyyy"}'/>
                            <span class="fa fa-tags"/>
                            <t t-foreach="blog_post.tag_ids" t-as="one_tag">
                                <a t-attf-href="#{blog_url(tag=one_tag)}" t-esc="one_tag.name"/> &amp;nbsp;
                            </t>
                        </div>
                    </div>
                </div>
            </xpath>
        </template>

        <template id="show_post_complete_layout_options"
            inherit_id="website_blog.blog_post_complete">
            <xpath expr="//h2[@t-field='blog_post.subtitle']" position="replace"/>
            <xpath expr="//div[@id='blog_content']" position="before">
                <div class="text-center" id="blog_title_sub_header" style="margin-top: 50px">
                </div>
                    <t t-if="blog_post.thumbnail">
                        <div align="center"
                            style = "margin: 18px 6px 18px 6px;"
                            t-field="blog_post.sudo().thumbnail.datas"
                            t-options = '{"widget": "image",  "max_width" : 512 }'
                            />
                    </t>
            </xpath>

            <xpath expr="//div[@id='blog_title']" position="move" 
                target="//div[@id='blog_title_sub_header']">
            </xpath>

            <!-- remove share buttons , while leaving container needed for xpaths -->
            <xpath expr="//div[@class='o_blog_post_complete o_sharing_links']" position="replace">
                <div class="o_blog_post_complete o_sharing_links" > 
                </div>
            </xpath> 
       </template>


        <template id="blog_show_cat_title"
            name="Blog category title show"
            inherit_id="website_blog.blog_post_short">
            <xpath expr="//h1[@t-field='blog.name']" position="after">
                <t t-if="current_category">
                    <h1>Posts for Category: <t t-esc="current_category.name" /> </h1>
                </t>
            </xpath>
        </template>

        <template id="opt_blog_rc_categories"
            name="Blog category list"
            active="False"
            inherit_id = "website_blog.index_right"
            customize_show="True">
            <!-- give the element Id in order to identify it in the next xpath in a future-proof way -->
            <xpath expr="//div[@id='blog_right_column']" position="inside">
                <section class="mt32">
                    <h4>Categories  (<t t-esc="len(categories)"/> )</h4>
                    <ul class="nav nav-pills nav-stacked">
                        <t t-foreach="categories" t-as="nav_cat">
                            <li t-attf-style="display: list-item;">
                                <a t-attf-href="#{blog_url('',['blog', 'tag', 'cat'], blog=blog, tag=None, cat=nav_cat.id)}">
                                    <b><span t-field="nav_cat.name"/></b>
                                    <span class="pull-right badge" t-esc="len(nav_cat.post_ids)" /> posts
                                </a>
                            </li>
                        </t>
                    </ul>
                </section>
            </xpath>
        </template>


    </data>
</openerp>
